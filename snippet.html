<!DOCTYPE html>
<html lang="en">

<head>
    <title>Snippet</title>
    <meta charset="utf-8">
    <meta name="theme-color" content="#ffffff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content='yes' name='apple-mobile-web-app-capable' />
    <meta content='yes' name='mobile-web-app-capable' />

</head>

<body>

    <h1>Invoke Object Service - Get</h1>

    <pre>
  objectGet: function(){
    var objSvc = kony.sdk.getCurrentInstance().getObjectService("ServiceName", {
      "access": "online"
    });

    var dataObject = new kony.sdk.dto.DataObject("ObjectName");
    var odataUrl = "Location$LatandLong$get";
    dataObject.odataUrl = odataUrl;


    var options = {
      "dataObject": dataObject,
      "CRUD_TYPE": "get"
    };

    objSvc.fetch(options,
                 function(response) {
      kony.print("record: " + JSON.stringify(response));
    },
                 function(error) {
      kony.print("Failed to fetch: " + JSON.stringify(error));
    });
  }
</pre>

    <h1>Invoke Object Service - Create</h1>
    <pre>
  objectCreate: function(){
    var objSvc = kony.sdk.getCurrentInstance().getObjectService("ServiceName", {
      "access": "online"
    });

    var dataObject = new kony.sdk.dto.DataObject("ObjectName");
    dataObject.addField("Lat", "12.45");
    dataObject.addField("Long", "76.45");
    dataObject.addField("Id", "3");
    dataObject.addField("Place", "Mandya");
    dataObject.addField("CreatedBy", "Gnanendra");

    var options1 = {
      "dataObject": dataObject,
      "CRUD_TYPE": "create"
    };

    objSvc.create(options1,function(response) {
      kony.print("record: " + JSON.stringify(response));
    },function(error) {
      kony.print("Failed to fetch: " + JSON.stringify(error));
    });
  }
</pre>

    <h1>Invoke Object Service - Update</h1>
    <pre>
var objSvc = kony.sdk.getCurrentInstance().getObjectService("ServiceName", {
      "access": "online"
    });

    var dataObject = new kony.sdk.dto.DataObject("ObjectName");
    dataObject.addField("Lat", "12.45");
    dataObject.addField("Long", "76.45");
    dataObject.addField("Id", "3");
    dataObject.addField("Place", "Kodagu");
    dataObject.addField("CreatedBy", "Admin");

    var options = {
      "dataObject": dataObject,
      "CRUD_TYPE": "update"
    };

    objSvc.update(options,
                  function(response) {
      kony.print("Record updated: " + JSON.stringify(response));
    },
                  function(error) {
      kony.print("Error in record update: " + JSON.stringify(error));
    });
</pre>

    <h1>Invoke Object Service - Delete</h1>

    <pre>
    var objSvc = kony.sdk.getCurrentInstance().getObjectService("ServiceName", {
      "access": "online"
    });

    var dataObject = new kony.sdk.dto.DataObject("ObjectName");
    dataObject.addField("Id", "3");

    var options = {
      "dataObject": dataObject,
      "CRUD_TYPE": "delete"
    };
    objSvc.deleteRecord(options,function(response) {
      kony.print("Record deleted: " + JSON.stringify(response));
    },function(error) {
      kony.print("Error in record deletion: " + JSON.stringify(error));
    });
</pre>

    <h1>Invoke Orchestration</h1>
    <pre>
  orchestration:function(){
    var serviceName = "TopStoriesandWeather";
    var integrationObj = KNYMobileFabric.getIntegrationService(serviceName);
    var operationName =  "getStoriesAndWeather";
    var data= {
      "country":"in",
      "lat":"12.23",
      "lon":"76.63"
    };
    var headers= {};	
    integrationObj.invokeOperation(operationName, headers, data,this.successos,this.erroros);
  },

  successos: function(response){
    kony.print("orchestration success "+JSON.stringify(response));
  },

  erroros: function(error){
    kony.print("orchestration failure "+JSON.stringify(error));

  }
</pre>

    <h1>Invoke Integration</h1>
    <pre>
  integration: function(){
    var serviceName = "NewsAndWeatherService";
    var client = kony.sdk.getCurrentInstance();
    var integrationSvc = client.getIntegrationService(serviceName);
    var operationName = "WeatherForecast";
    var params = {
      "lat":"12.2958",
      "lon":"76.6394"
    };
    var headers = {};

    var options = {
      "httpRequestOptions": {
        "timeoutIntervalForRequest": 60,
        "timeoutIntervalForResource": 600
      }
    };
    integrationSvc.invokeOperation(operationName, headers, params, this.successig,this.errorig,options);
  },

  successig:function(response){
    kony.print("Integration Success Response is: " + JSON.stringify(response));

  },

  errorig:function(error){
    kony.print("Integration Error Failure:" + JSON.stringify(error));
  }

</pre>

</body>

</html>
